<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Android NDK, Descubriendo por qu칠 la app Android de Instagram est치 escrita en C/C++ - Ivan Santos</title><meta name="gridsome:hash" content="b539c812d5d4ef62e983baebfbee63b2ffa846b5"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.20"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Ivan Santos Portfolio and Blog"><meta data-vue-tag="ssr" name="author" content="Iv치n Santos"><meta data-vue-tag="ssr" data-key="description" name="description" content="Ivan Santos Portfolio and Blog"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,700"><link rel="preload" href="/assets/css/0.styles.11d2e791.css" as="style"><link rel="preload" href="/assets/js/app.d4cb8a3b.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.4dce4f95.js" as="script"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.6fb1381b.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.9067934b.js"><link rel="prefetch" href="/assets/js/page--src--pages--docs-vue.a778d4ba.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.01d13d82.js"><link rel="prefetch" href="/assets/js/page--src--templates--documentation-vue.a7077f02.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.5fd22563.js"><link rel="prefetch" href="/assets/js/vue-remark--docs--vue-components-in-markdown-md.370e510e.js"><link rel="stylesheet" href="/assets/css/0.styles.11d2e791.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="content-wrapper bg-background-primary font-sans text-copy-primary leading-normal flex flex-col min-h-screen"><header class="border-t-14 border-green-700"><nav class="container mx-auto flex flex-wrap justify-between items-center py-8"><div><a href="/" class="active"><img alt="logo" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 595 300' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-f7d380d38fbecb378a9c4fe1dcf9fa38'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-f7d380d38fbecb378a9c4fe1dcf9fa38)' width='595' height='300' xlink:href='data:image/svg%2bxml%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEiUlEQVRo3u2XX4gXVRTHf7/5bcpWpGZamxJluuSv%2bV2kggok%2boNBZSma7m9mLTUtn8rMjJKtZXdndqkNqoe1B8mKHjIELQjKh4z%2bgD5EKGIPRUF/IDIoeoggivqeme%2bdPXN3fvtQL/twD3yYe%2b/ce%2bbcc8%2b990yt5sWLFy9evHj5r3J1sql46vJ00hqJaisnduTlJMqwEo5EM2NirbRdGEYjG7ou0kz7dZ86CKRsnEkVOlW71WnSOMhIoi7RUbxL4862lXXUrhrry52X/A/nuUpNEpfaO/VjObDvDSdRJcZx4HR2dJLm4IZpF8aWzWhebjGiwqS8oCUJs4F2wjFWMg6WPLNOD5gPNoFZ6kN1PXk8LwFrnDYY0G/1lqNnuE8i5knwMfgIjLXSaLGKJjdy8u%2blkxHnOK6ux%2bXluGH7YUHrII9QRFehXwxTkw8cpQ0%2bU/BdCKP1Ktv%2beHcB%2bACMq7ES2qXV4dawYx4Ag2At2AXOgr000H43cByBrZLptDrmgIfB%2bToCXecYNS%2bru1gUN4zxvBBsb460bfs54Ecx1Nb5XKwMa4EVavz8jtsmLZz2Mtii%2bsySsarercrnSYRVbJfXwJeqvkyV54IBcCnr14PbGUUNHU1FOIVPS/hHn8PIN5Si9eBreHYhnu8x1KV8QJSLAWAI3ryO/Y9l9TTqwfMVa7jaMva5NPtWEn0K3avVdhSHf8LJ3cW%2bL4K3W0lbnLQfNMHjZjT%2bB8%2bH2Ocw%2bAHErO9bMX6/vB9iZNyC8h%2bw8w7thJoTYjAoPsgBXWx7C0xwZaEgmg12gm3gQxr3HHheVgD8CR6RLQO%2buGz3%2bsrrTqR3aK20baEjDrDfm%2bAoeBC8C84Fv4FhbrO/m4P9slDPyqQ5Zgz8zMU5wjZx1GZwhWHUYU43oP4XuLWI%2bmxv8soxaTSOTiexZxZKffnuVfL%2bK7AajrmIht4E9oC7wXEg7d8CWfFxRkQfOAVus2eJ42g5UxY44SznwH38xsXgMwlZsBH8ykNYHLCT/U%2bDO1mWLbqSW2U/214FW50zZRdW/hvQyyioV0XBS3Iys3x55tk0mgPH3MyV2Mt3j4FDEoLgDJjHVZ/gqsmhdq0%2b1WGIDf%2bjXLEN/EZvvo0yJxzjwfg9WALeASc4Tr7T5qF7lltwLp3Rw0NVVv0F8H5LbS1%2b6yfMZREnH0w5oFTnpXzO4xaQfbkKvC6T4wl6JcpPgUVgB8NvVMZw7HZwY4f9301H/QJ%2bp2P3MFIGOPGtdM4TwHDcveAelmWyj%2bKen832IY7bSJv3SSSpOfXYurrd7NUQFYmKSftLbdlqpvl5oK%2bj6ZIV49zhThJU1yc9WF51wlfoDCpuga6Ktm46ZJnKB6bYnt9I0VSjTTnJUalxnF1hk%2b%2byG6NhU2BRJiGuJtrQesJy5ihJSaOceud3fkknt41JiyQosO2liWT5wWQqrpOjymTKnbwr4XBbZ1xZ2SAvMM5qaiddM7C5pLhTSmvfN/N/DTvRukrGqtLdivJkNhci7Q3TUp9AZ44mmSE/WF68ePHixYsXL168zBz5F/fwmf4gM7uaAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="595" data-src="/assets/static/logoPersonal.e4b7663.1b2958591d44be0bbe0c0c010cc1bdcf.svg" data-srcset="/assets/static/logoPersonal.e4b7663.1b2958591d44be0bbe0c0c010cc1bdcf.svg 595w" data-sizes="(max-width: 595px) 100vw, 595px" class="w-40 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/logoPersonal.e4b7663.1b2958591d44be0bbe0c0c010cc1bdcf.svg" class="w-40 g-image g-image--loaded" width="595" alt="logo"></noscript></a></div><div class="block lg:hidden"><button data-cypress="hamburger" class="flex items-center px-3 py-2 border rounded border-gray-500 hover:text-gray-600 hover:border-gray-600"><svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="current-color h-3 w-3"><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" fill="gray"></path></svg></button></div><ul data-cypress="menu" class="uppercase tracking-wide font-bold w-full block flex-grow lg:space-x-8 space-y-6 lg:space-y-0 lg:flex lg:flex-initial lg:w-auto items-center mt-8 lg:mt-0 hidden"><li class="mb-6 lg:mb-0"><div class="relative" data-v-46b19670><div data-v-3ae9f24e data-v-46b19670></div><div class="relative w-80" data-v-46b19670><input type="text" placeholder="Search (Press  "/" to focus)" data-cypress="search" value="" class="bg-background-form border border-gray-500 rounded-full px-4 pl-10 py-2 outline-none focus:border-green-500 w-80" data-v-46b19670><div class="absolute top-0 ml-3" style="top:10px" data-v-46b19670><svg fill="currentColor" viewBox="0 0 24 24" width="24" height="24" class="text-gray-500 h-5 w-5" data-v-46b19670><path d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" class="heroicon-ui" data-v-46b19670></path></svg></div><!----></div><!----></div></li><li><a href="#" data-cypress="switchTheme" class="text-copy-primary hover:text-gray-600"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></svg></a></li><li><a href="/#projects" class="text-copy-primary hover:text-gray-600">Projects</a></li><li><a href="/blog" data-cypress="blog" class="text-copy-primary hover:text-gray-600">Blog</a></li></ul></nav></header><main class="flex-grow"><div class="container-inner mx-auto my-16"><h1 class="text-4xl font-bold leading-tight">Android NDK, Descubriendo por qu칠 la app Android de Instagram est치 escrita en C/C++</h1><div class="text-xl text-gray-600 mb-4">January 4, 2021</div><div class="flex mb-8 text-sm"><a href="/tag/Android/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 hover:bg-green-300">
        Android
      </a><a href="/tag/NDK/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 hover:bg-green-300">
        NDK
      </a><a href="/tag/C/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 hover:bg-green-300">
        C
      </a><a href="/tag/C%2B%2B/" class="bg-gray-300 rounded-full px-4 py-2 mr-4 hover:bg-green-300">
        C++
      </a></div><div class="markdown-body mb-8"><h1 id="android-ndk-descubriendo-por-qu칠-la-app-android-de-instagram-est치-escrita-en-cc"><a href="#android-ndk-descubriendo-por-qu%C3%A9-la-app-android-de-instagram-est%C3%A1-escrita-en-cc" aria-hidden="true"><span class="icon icon-link"></span></a>Android NDK: Descubriendo por qu칠 la app Android de Instagram est치 escrita en C/C++</h1>
<p>쯈u칠 cara 游뱕 pondr칤as si te dijera que algunas de las aplicaciones m칩viles que m치s utilizas en el d칤a a d칤a tienen parte
de su c칩digo escrito en C o C++? Tal vez pensar칤as que es la t칤pica pregunta con trampa y que tal vez utilizan alguna
librer칤a del sistema que est치 escrita en dichos lenguajes de programaci칩n. Pero este no es el caso de aplicaciones como
Whatsapp, Skype, Instagram o Facebook donde parte del c칩digo de sus aplicaciones est치 escrito en estos lenguajes
utilizando posteriormente el conjunto de herramientas del NDK de Android para hacer llamadas a las mismas. Muestra de
esto es, por ejemplo, la siguiente oferta de trabajo publicada por Facebook donde buscan un/una Ingenier@ expert@ en el
NDK de Android.</p>
<p><img src="images/AndroidNDK/JobOffer.png" alt="Oferta de trabajo para Android NDK de Facebook"></p>
<h2 id="쯤u칠-es-y-c칩mo-funciona-el-ndk-de-android-"><a href="#%C2%BFqu%C3%A9-es-y-c%C3%B3mo-funciona-el-ndk-de-android-" aria-hidden="true"><span class="icon icon-link"></span></a>쯈u칠 es y c칩mo funciona el NDK de Android? 游님</h2>
<p>El NDK de Android (Native Development Kit) permite que l@s desarrollador@s podamos reutilizar c칩digo desarrollado en
C/C++ pudiendo ejecutarlo en nuestras aplicaciones a trav칠s del uso de JNI (Java Native Interface). JNI es conjunto de
herramientas que nos permite que cualquier programa escrito en Java, y por tanto, que funciona en la m치quina virtual de
Java, pueda ejecutar c칩digo escrito en otros lenguajes como C, C++ o incluso ensamblador.</p>
<p>El NDK de Android nos permite a su vez manejar como se compilan nuestro c칩digo nativo utilizando NDK-build o CMake. El
funcionamiento general del NDK en nuestra aplicaci칩n Android sigue el flujo siguiente:</p>
<p><img src="images/AndroidNDK/NDK_Android.png" alt="Flujo de aplicaci칩n Android con c칩digo nativo C/C++"></p>
<p>Tenemos nuestro c칩digo Android donde en primer lugar debemos cargar la librer칤a nativa que vamos a utilizar y la
cabecera de los m칠todos nativos de la misma que utilizaremos. Mientras que por otro lado en nuestro c칩digo C/C++ debemos
tener la implementaci칩n de esas funciones definidas en Java/Kotlin. Posteriormente, entraremos m치s en detalle en estos
aspectos con nuestro ejemplo pr치ctico.</p>
<p>Por otro lado, hay que tener en cuenta que nuestro c칩digo nativo no va a ejecutarse en una m치quina virtual de Java y
que, por tanto, debe estar compilado para que pueda ser ejecutado en las diferentes arquitecturas de procesadores
disponibles en Android si queremos que desde cualquier dispositivo se pueda ejecutar nuestra App. Adem치s, las librer칤as
que utilicemos, deben tambi칠n compilarse para ser ejecutadas en las diferentes arquitecturas que soporte nuestra app. La
combinaci칩n entre la arquitecturas de CPU y los conjuntos de instrucciones que las mismas pueden ejecutar componen cada
una de las plataformas para las que debemos compilar nuestra aplicaci칩n. A d칤a de hoy, estas son las combinaciones,
llamadas ABI (interfaz binaria de aplicaci칩n), disponibles en Android:</p>
<p><img src="images/AndroidNDK/ABIs.png" alt="Conjunto de ABIS de Android"></p>
<p>Finalmente, hay que tener en cuenta que el uso del NDK puede ser 칰til en cierto tipo de aplicaciones, mientras que en
otras no ser칤a necesario utilizarlo debido al aumento de la complejidad del proyecto sin obtener grandes beneficios por
ello.</p>
<h2 id="쯖u치ndo-deber칤a-utilizar-el-ndk-de-android"><a href="#%C2%BFcu%C3%A1ndo-deber%C3%ADa-utilizar-el-ndk-de-android" aria-hidden="true"><span class="icon icon-link"></span></a>쮺u치ndo deber칤a utilizar el NDK de Android?游뱂</h2>
<p>Desde mi punto de vista, hay dos situaciones principales donde me decantar칤a por utilizar c칩digo nativo en mi aplicaci칩n
Android.</p>
<p>Sin lugar a dudas el primer factor que me har칤a decantarme a utilizar el NDK de Android no es otro que la mejora de
rendimiento de mi aplicaci칩n. En mi caso concreto, lo he utilizado com칰nmente para ejecutar funciones criptogr치ficas en
mis aplicaciones, donde el uso de ciertas librer칤as para trabajar con funciones matem치ticas escritas en C proporciona
mayor rendimiento y facilidad para ejecutar las mismas. En este tipo de aplicaciones, el cifrado/descifrado de grandes
cantidades de datos podr칤a hacer inusable nuestra aplicaci칩n, por lo que el uso del NDK proporciona ese rendimiento
extra necesario debido a que dichas operaciones son ejecutadas directamente en la CPU sin pasar por la JVM. Otro tipo de
aplicaciones donde el rendimiento es especialmente importante, son las relacionadas con la codificaci칩n de datos
multimedia como audio y video o los videojuegos donde el uso del NDK est치 totalmente recomendado.</p>
<p>El segundo factor que me har칤a decantarme por el uso del NDK de Android ser칤a el disponer de una amplia base de c칩digo
escrita en este lenguaje, lo suficientemente estable, testeada y probada de manera que requiera de pocos cambios durante
su vida 칰til o cuyo equipo de desarrollo pueda mantener la misma.</p>
<h2 id="ejemplo-de-aplicaci칩n-utilizando-el-ndk-de-android-"><a href="#ejemplo-de-aplicaci%C3%B3n-utilizando-el-ndk-de-android-" aria-hidden="true"><span class="icon icon-link"></span></a>Ejemplo de aplicaci칩n utilizando el NDK de Android 游</h2>
<p>El primer paso consiste en crearnos un nuevo proyecto en Android Studio basado en el NDK.</p>
<p><img src="images/AndroidNDK/AndroidStudio.png" alt="Template de proyecto de Android Studio"></p>
<p>Una vez que hayamos creado nuestro proyecto, dispondremos de nuestra aplicaci칩n Hello World utilizando el NDK. Podemos
observar como en la estructura de nuestro proyecto tenemos un directorio <code>Java</code>y otro directorio <code>cpp</code> donde tendremos
el c칩digo Java y el c칩digo nativo respectivamente.</p>
<p><img src="images/AndroidNDK/ProjectStructure.png" alt="Estructura de proyecto con NDK de Android"></p>
<p>En el ejemplo que vamos a ver a continuaci칩n vamos a desarrollar una aplicaci칩n que cifra y descifra mensajes de texto.</p>
<p>Aqu칤 podemos ver una captura de la interfaz de usuario de la aplicaci칩n:</p>
<p><img src="images/AndroidNDK/Screenshot.png" alt="Imagen de la aplicaci칩n de ejemplo desarrollada"></p>
<p>Como podemos ver disponemos de dos botones <code>cifrar</code>y <code>descifrar</code>, que son los encargados de invocar a nuestras funciones
responsables de dicho cometido. Dichas funciones, internamente har치n uso de la librer칤as propias de <code>openssl</code> escritas
en C para hacer ejecutar diferentes funciones y algoritmos criptogr치ficos. Un aspecto importante a la hora de utilizar
el NDK de Android es que tendremos que realizar una envoltura a las diferentes funciones que utilicemos de nuestro
c칩digo C y que queramos invocar desde nuestro c칩digo Java/Kotlin. Es se debe a que dichas funciones deben utilizar el
JNI para recibir como entrada los tipos de datos necesarios, convertirlos a tipos de datos v치lidos en C y hacer la
operaci칩n inversa en el momento de devolver alg칰n resultado, convertir los tipos de datos de C a tipos de datos v치lidos
en Java.</p>
<p>El primer paso para configurar nuestra aplicaci칩n consiste en importar nuestra librer칤a as칤 como la librer칤a <code>openssl</code> a
nuestro proyecto. Para ello adem치s de tener los ficheros necesarios en nuestro proyecto, debemos enlazarlos dentro del
fichero <code>CMakeLists.txt</code>.</p>
<p><img src="images/AndroidNDK/Libraries.png" alt="Esctructura de las librer칤as a incluir en la app de ejemplo"></p>
<p>Como podemos observar en la imagen, dentro del directorio <code>cpp</code> tenemos la librer칤a <code>openssl</code> previamente compilada para
cada una de las ABIs que vamos a soportar en el proyecto (que podr칤an o no ser todas las disponibles, o solo un
subconjunto de las mismas) as칤 como el directorio <code>include</code> donde tenemos los ficheros de cabecera con las diferentes
funciones de la librer칤a <code>openssl</code> que vamos a utilizar.</p>
<p>Por otro lado, tenemos nuestra librer칤a, <code>crypto.c</code> y su correspondiente fichero de cabeceras <code>crypto.h</code> y el
fichero <code>main.c</code> punto de entrada a nuestro c칩digo nativo.</p>
<p>A continuaci칩n, podemos observar el fichero <code>CMakeLists.txt</code> con cada una de las opciones comentadas para entenderlas
mejor.</p>
<pre class="shiki" style="background-color: #292D3E"><code><span style="color: #676E95"># versi칩n m칤nima de CMake necesaria para compilar la librer칤a</span>
<span style="color: #FFFFFF">cmake_minimum_required(VERSION 3.10.2)</span>

<span style="color: #676E95"># declaraci칩n y nombre del proyecto</span>
<span style="color: #FFFFFF">project("samplendkapp")</span>

<span style="color: #676E95">#inclusi칩n de los ficheros de cabecera de las librer칤as a utilizar (openssl)</span>
<span style="color: #FFFFFF">include_directories(${CMAKE_CURRENT_SOURCE_DIR}/openssl/include) </span>

<span style="color: #676E95"># A침adimos nuevas librer칤as, libcrypto y libssl que son los dos componentes de openssl</span>
<span style="color: #FFFFFF">add_library(libcrypto STATIC IMPORTED) </span>
<span style="color: #FFFFFF">add_library(libssl STATIC IMPORTED)</span>

<span style="color: #676E95"># Linkamos las librerias con los ejecutables previamente compilados utilizando la variable ${ANDROID_ABI} para diferenciar por tipo de ABI</span>
<span style="color: #FFFFFF">set_target_properties(libcrypto PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}/openssl/lib/${ANDROID_ABI}/lib/libcrypto.a)</span>
<span style="color: #FFFFFF">set_target_properties(libssl PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}/openssl/lib/${ANDROID_ABI}/lib/libssl.a)</span>

<span style="color: #FFFFFF">add_library( </span><span style="color: #676E95"># seteamos el nombre de la nueva librer칤a que vamos a crear para se consumidad de Java/Kotlin.</span>
<span style="color: #FFFFFF">             native-lib</span>
<span style="color: #89DDFF">             </span><span style="color: #676E95"># La seteamos como compartida.</span>
<span style="color: #FFFFFF">             SHARED</span>
<span style="color: #89DDFF">             </span><span style="color: #676E95"># Seteamos la ruta relativa a los ficheros fuente de nuestra librer칤a</span>
<span style="color: #FFFFFF">             crypto.c</span>
<span style="color: #FFFFFF">             main.c )</span>

<span style="color: #676E95"># Busca una biblioteca predefinida especificada y almacena la ruta como variable. </span>
<span style="color: #676E95"># Debido a que CMake incluye bibliotecas del sistema en la ruta de b칰squeda</span>
<span style="color: #676E95"># predeterminada, solo necesita especificar el nombre de la biblioteca p칰blica del NDK</span>
<span style="color: #676E95"># que se desea agregar. CMake verifica que la biblioteca exista antes para</span>
<span style="color: #676E95"># completar su construcci칩n.</span>

<span style="color: #FFFFFF">find_library( </span><span style="color: #676E95"># nombre de la librer칤a que utilizaremos.</span>
<span style="color: #FFFFFF">              log-lib</span>

<span style="color: #89DDFF">              </span><span style="color: #676E95"># nombre de la librer칤a del sistema que CMake debe localizar</span>
<span style="color: #FFFFFF">              log )</span>

<span style="color: #676E95"># Especifica las bibliotecas que CMake debe vincular a su librer칤a de destino.</span>
<span style="color: #676E95"># Se pueden vincular varias librer칤a , como las librer칤a definidas en este</span>
<span style="color: #676E95"># script, bibliotecas de terceros precompiladas o bibliotecas del sistema.</span>

<span style="color: #FFFFFF">target_link_libraries( </span><span style="color: #676E95"># librer칤a de destino.</span>
<span style="color: #FFFFFF">                       native-lib</span>

<span style="color: #89DDFF">                       </span><span style="color: #676E95"># Librer칤as que vamos a linkar a native-lib</span>
<span style="color: #FFFFFF">                        libcrypto</span>
<span style="color: #FFFFFF">                        libssl</span>
<span style="color: #FFFFFF">                       ${log-lib} )</span></code></pre>
<p>El siguiente paso consiste en cargar nuestra librer칤a nativa en nuestro c칩digo, para ello bastar칤a con un companion
object en la activity desde la cual lo vamos a llamar y crear las cabeceras de las funciones de nuestro c칩digo C que
llamaremos desde aqu칤. La palabra reservada <code>external</code> hace referencia a que la funci칩n a la que vamos a llamar est치
escrita en un lenguaje diferente de Java/kotlin y en Java se declara con la palabra reservada <code>native</code>.</p>
<code class="shiki" style="background: #2e3440; color: #d8dee9">private external fun encryptFromJNI(message: String): ByteArray
private external fun decryptFromJNI(message: ByteArray): String

companion object {
        init {
            System.loadLibrary(&quot;native-lib&quot;)
        }
    }</code>
<p>Finalmente, creamos en C nuestras funciones que envuelve a los m칠todos que vamos a llamar de nuestra librer칤a en c칩digo
nativo (<a href="https://github.com/IvanSantosGonz/CryptAndDecriptAndroidNDK/blob/master/app/src/main/cpp/crypto.c" target="_blank" rel="nofollow noopener noreferrer">crypto.c</a>),
y que recibe y devuelve objetos con tipado del JNI, que son f치cilmente identificables debido a que todos los tipos
empiezan por J, <code>jstring , jint, jchar, etc</code>. Otro aspecto a tener en cuenta, es que para que este m칠todo haga
referencia a la cabecera que declaramos desde Java/Kotlin, el nombre del mismo debe coincidir con la ruta completa del
fichero donde la cabecera es invocada, separando cada subdirectorio con guion bajo.</p>
<p>Finalmente, podemos observar tambi칠n como se usa la palabra reservada <code>JNIEXPORT</code> seguida del tipo de dato que queremos
devolver, as칤 como seguido de la palabra reservada <code>JNICALL</code> como anotaci칩n a cada m칠todo.</p>
<p>El c칩digo completo de este ejemplo est치 disponible en el siguiente repositorio de Github:</p>
<p><a href="https://github.com/IvanSantosGonz/CryptAndDecriptAndroidNDK" target="_blank" rel="nofollow noopener noreferrer">https://github.com/IvanSantosGonz/CryptAndDecriptAndroidNDK</a></p>
<code class="shiki" style="background: #2e3440; color: #d8dee9">JNIEXPORT jbyteArray JNICALL
Java_com_samplendkapp_MainActivity_encryptFromJNI(JNIEnv *env, jobject this, jstring message) {

    int ciphertext_len;
    unsigned char ciphertext[128];

    unsigned char *plaintext = (*env)-&gt;GetStringUTFChars(env, message, 0);

    ciphertext_len = encrypt(plaintext, strlen((char *) plaintext), key, iv,
                             ciphertext);
    BIO_dump_fp(stdout, (const char *) ciphertext, ciphertext_len);

    jbyteArray array = (*env)-&gt;NewByteArray(env, ciphertext_len);
    (*env)-&gt;SetByteArrayRegion(env, array, 0, ciphertext_len, (jbyte *) (ciphertext));
    return array;
}

JNIEXPORT jstring JNICALL
Java_com_samplendkapp_MainActivity_decryptFromJNI(JNIEnv *env, jobject this, jbyteArray message) {

    int decryptedtext_len;

    unsigned char decryptedtext[128];

    int len = (*env)-&gt;GetArrayLength (env, message);
    unsigned char encryptedText[len];
    (*env)-&gt;GetByteArrayRegion (env, message, 0, len, (jbyte*) (encryptedText));

    decryptedtext_len = decrypt(encryptedText, len, key, iv,
                                decryptedtext);

    decryptedtext[decryptedtext_len] = &#039;\0&#039;;

    return (*env)-&gt;NewStringUTF(env, decryptedtext);
}</code>
<h2 id="huevo-de-pascua-游볰"><a href="#huevo-de-pascua-%F0%9F%A5%9A" aria-hidden="true"><span class="icon icon-link"></span></a>Huevo de Pascua 游볰游냟</h2>
<p>Para no quedarnos con el click bait del t칤tulo, hay que tener en cuenta que ciertas aplicaciones como son el caso de
Instagram, tienen versiones diferentes de su aplicaci칩n en otras plataformas como Android, IOS o Web. En el caso
concreto de Instagram, se utilizan diferentes librer칤as escritas en C para la codificaci칩n de video, as칤 como los
filtros de im치genes y otras partes de su aplicaci칩n son creados utilizando c칩digo nativo C/C++ por dos razones
principales, tener la m치xima eficiencia al aplicar los mismos, y a su vez poder reutilizar el c칩digo en todas las
plataformas necesarias. En el caso de Instagram, al ser una aplicaci칩n privada no podemos tener la certeza de esto, pero
s칤 que sabemos que es una pr치ctica m치s com칰n de lo que parece. Para ejemplo de ello, el c칩digo de una app que si podemos
observar es el de Telegram al ser de dominio
p칰blico, (<a href="https://github.com/TelegramOrg/Telegram-Android/tree/master/TMessagesProj/jni" target="_blank" rel="nofollow noopener noreferrer">repositorio de Telegram</a>)
donde podemos observar la gran cantidad de librer칤as basadas en c칩digo nativo que utiliza.</p>
<p><img src="images/AndroidNDK/Telegram.png" alt="Repositorio de Telegram con c칩digo nativo utilizado"></p>
<h2 id="referencias-"><a href="#referencias-" aria-hidden="true"><span class="icon icon-link"></span></a>Referencias 游닄</h2>
<ul>
<li>Repositorio del
ejemplo: <a href="https://github.com/IvanSantosGonz/CryptAndDecriptAndroidNDK" target="_blank" rel="nofollow noopener noreferrer">https://github.com/IvanSantosGonz/CryptAndDecriptAndroidNDK</a></li>
<li>Android developers NDK: <a href="https://developer.android.com/ndk" target="_blank" rel="nofollow noopener noreferrer">https://developer.android.com/ndk</a></li>
<li>Android developers
JNI: <a href="https://developer.android.com/training/articles/perf-jni?hl=es-419" target="_blank" rel="nofollow noopener noreferrer">https://developer.android.com/training/articles/perf-jni?hl=es-419</a></li>
</ul>
</div><div class="mb-8"><a href="/blog" class="font-bold uppercase">Back to Blog</a></div></div></main><footer class="bg-green-700 text-white"><div class="container mx-auto flex flex-col lg:flex-row items-center justify-between py-8"><div class="mb-8 lg:mb-0"><div>Copyright 2021. All rights reserved.</div><div><a href="/rss.xml" class="text-white hover:text-gray-400 font-normal">RSS Feed</a> |
          <a href="/sitemap.xml" class="text-white hover:text-gray-400 font-normal">Sitemap</a></div></div><ul class="flex items-center space-x-8"><li><a href="mailto:ivansantosgonz@gmail.com" class="text-white hover:text-gray-400"><svg width="25" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 0h20A2.5 2.5 0 0 1 25 2.5v15a2.5 2.5 0 0 1-2.5 2.5h-20A2.5 2.5 0 0 1 0 17.5v-15C0 1.125 1.125 0 2.5 0zm20 4.225V2.5h-20v1.725l10 5 10-5zm0 2.8l-9.438 4.713a1.25 1.25 0 0 1-1.124 0L2.5 7.025V17.5h20V7.025z" fill-rule="nonzero"></path></svg></a></li><li><a href="https://github.com/IvanSantosGonz" target="_blank" class="text-white hover:text-gray-400"><svg width="20" height="19" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M10 0c1.814 0 3.487.435 5.02 1.306a9.827 9.827 0 0 1 3.639 3.542A9.33 9.33 0 0 1 20 9.734c0 2.121-.636 4.03-1.908 5.723a9.783 9.783 0 0 1-4.928 3.518c-.234.042-.408.012-.52-.09a.49.49 0 0 1-.17-.38l.006-.969c.005-.621.007-1.19.007-1.705 0-.82-.226-1.42-.677-1.8.495-.05.94-.126 1.335-.228a5.4 5.4 0 0 0 1.223-.494 3.62 3.62 0 0 0 1.055-.843c.282-.334.512-.777.69-1.33.178-.554.267-1.19.267-1.909a3.7 3.7 0 0 0-1.028-2.61c.32-.77.286-1.631-.105-2.586-.243-.076-.594-.03-1.054.14-.46.168-.86.354-1.198.557l-.495.304a9.478 9.478 0 0 0-2.5-.33c-.86 0-1.693.11-2.5.33a11.6 11.6 0 0 0-.553-.342c-.23-.135-.593-.298-1.088-.488-.494-.19-.863-.247-1.106-.171-.391.955-.426 1.816-.105 2.585A3.7 3.7 0 0 0 3.62 9.227c0 .719.089 1.352.267 1.902.178.549.406.993.683 1.33.278.339.627.622 1.048.85a5.4 5.4 0 0 0 1.224.494c.395.102.84.178 1.335.228-.338.305-.551.74-.638 1.306a2.631 2.631 0 0 1-.586.19 3.782 3.782 0 0 1-.742.063c-.287 0-.57-.09-.853-.272a2.256 2.256 0 0 1-.723-.792 2.068 2.068 0 0 0-.631-.66c-.256-.168-.471-.27-.645-.304l-.26-.038c-.182 0-.308.02-.378.057-.07.038-.09.087-.065.146.026.06.065.118.117.178.053.059.109.11.17.152l.09.063c.192.085.38.245.567.482.187.236.324.452.41.646l.13.292c.113.32.304.58.574.78.269.198.56.325.872.38.312.054.614.084.905.088.29.004.532-.01.723-.044l.299-.05c0 .32.002.694.007 1.12l.006.692a.49.49 0 0 1-.17.38c-.112.101-.286.13-.52.089a9.783 9.783 0 0 1-4.928-3.518C.636 13.763 0 11.855 0 9.734a9.33 9.33 0 0 1 1.341-4.886 9.827 9.827 0 0 1 3.64-3.542C6.512.436 8.185 0 10 0zM3.79 13.98c.025-.058-.005-.11-.092-.151-.087-.026-.143-.017-.17.025-.025.06.005.11.092.152.078.05.134.042.17-.025zm.403.432c.06-.043.052-.11-.026-.203-.087-.076-.157-.089-.209-.038-.06.042-.052.11.026.203.087.084.157.097.209.038zm.39.57c.078-.06.078-.14 0-.24-.07-.11-.143-.136-.221-.077-.078.042-.078.118 0 .228.078.11.152.14.221.089zm.547.532c.07-.067.052-.148-.052-.24-.104-.102-.19-.115-.26-.039-.078.068-.061.148.052.241.104.102.19.114.26.038zm.742.317c.026-.093-.03-.16-.169-.203-.13-.033-.213-.004-.247.09-.035.092.021.155.169.19.13.05.213.025.247-.077zm.82.064c0-.11-.073-.157-.22-.14-.14 0-.209.047-.209.14 0 .11.074.156.221.139.14 0 .209-.046.209-.14zm.756-.127c-.017-.093-.096-.131-.234-.114-.14.025-.2.088-.183.19.018.101.096.135.235.101.139-.034.2-.093.182-.177z" fill-rule="nonzero"></path></svg></a></li><li><a href="https://twitter.com/SantosIvn" target="_blank" class="text-white hover:text-gray-400"><svg width="20" height="17" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19.807 1.943a8.588 8.588 0 0 1-2.036 2.135 11.918 11.918 0 0 1-.465 3.854 12.085 12.085 0 0 1-1.452 3.177 12.426 12.426 0 0 1-2.318 2.691c-.897.78-1.978 1.402-3.243 1.867-1.265.464-2.618.697-4.06.697-2.27 0-4.348-.618-6.233-1.854.293.034.62.051.98.051 1.885 0 3.565-.588 5.04-1.764a3.915 3.915 0 0 1-2.363-.825 4.038 4.038 0 0 1-1.432-2.039c.276.043.532.064.766.064.36 0 .717-.047 1.068-.14A3.982 3.982 0 0 1 1.73 8.43c-.617-.754-.925-1.63-.925-2.627v-.051c.57.324 1.182.498 1.835.524a4.1 4.1 0 0 1-1.32-1.47 4.078 4.078 0 0 1-.49-1.969c0-.75.185-1.445.553-2.084a11.548 11.548 0 0 0 3.702 3.05 11.163 11.163 0 0 0 4.669 1.271c-.067-.324-.1-.639-.1-.946 0-1.142.395-2.116 1.187-2.92C11.632.402 12.589 0 13.712 0c1.173 0 2.161.435 2.966 1.304a7.878 7.878 0 0 0 2.576-.997 3.997 3.997 0 0 1-1.785 2.275 7.98 7.98 0 0 0 2.338-.639z" fill-rule="nonzero"></path></svg></a></li></ul></div></footer><div style="display:none"><svg id="dots-triangle" width="170" height="170" xmlns="http://www.w3.org/2000/svg"><path d="M168.152 170a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 0a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.479 0a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zM94.24 133.043a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 36.956a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm-18.478 55.434a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.479 73.913a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm-18.478 92.391a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0 18.479a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zM1.848 133.044a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.695zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0 18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-55.435a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.479a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.695 1.848 1.848 0 0 1 0 3.695zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696zm0-18.478a1.848 1.848 0 1 1 0-3.696 1.848 1.848 0 0 1 0 3.696z" fill="#2C8056" fill-rule="evenodd" opacity=".503"></path></svg></div></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Android NDK, Descubriendo por qu칠 la app Android de Instagram est치 escrita en C\u002FC++","date":"January 4, 2021","content":"\u003Ch1 id=\"android-ndk-descubriendo-por-qu칠-la-app-android-de-instagram-est치-escrita-en-cc\"\u003E\u003Ca href=\"#android-ndk-descubriendo-por-qu%C3%A9-la-app-android-de-instagram-est%C3%A1-escrita-en-cc\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAndroid NDK: Descubriendo por qu칠 la app Android de Instagram est치 escrita en C\u002FC++\u003C\u002Fh1\u003E\n\u003Cp\u003E쯈u칠 cara 游뱕 pondr칤as si te dijera que algunas de las aplicaciones m칩viles que m치s utilizas en el d칤a a d칤a tienen parte\nde su c칩digo escrito en C o C++? Tal vez pensar칤as que es la t칤pica pregunta con trampa y que tal vez utilizan alguna\nlibrer칤a del sistema que est치 escrita en dichos lenguajes de programaci칩n. Pero este no es el caso de aplicaciones como\nWhatsapp, Skype, Instagram o Facebook donde parte del c칩digo de sus aplicaciones est치 escrito en estos lenguajes\nutilizando posteriormente el conjunto de herramientas del NDK de Android para hacer llamadas a las mismas. Muestra de\nesto es, por ejemplo, la siguiente oferta de trabajo publicada por Facebook donde buscan un\u002Funa Ingenier@ expert@ en el\nNDK de Android.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FJobOffer.png\" alt=\"Oferta de trabajo para Android NDK de Facebook\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"쯤u칠-es-y-c칩mo-funciona-el-ndk-de-android-\"\u003E\u003Ca href=\"#%C2%BFqu%C3%A9-es-y-c%C3%B3mo-funciona-el-ndk-de-android-\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E쯈u칠 es y c칩mo funciona el NDK de Android? 游님\u003C\u002Fh2\u003E\n\u003Cp\u003EEl NDK de Android (Native Development Kit) permite que l@s desarrollador@s podamos reutilizar c칩digo desarrollado en\nC\u002FC++ pudiendo ejecutarlo en nuestras aplicaciones a trav칠s del uso de JNI (Java Native Interface). JNI es conjunto de\nherramientas que nos permite que cualquier programa escrito en Java, y por tanto, que funciona en la m치quina virtual de\nJava, pueda ejecutar c칩digo escrito en otros lenguajes como C, C++ o incluso ensamblador.\u003C\u002Fp\u003E\n\u003Cp\u003EEl NDK de Android nos permite a su vez manejar como se compilan nuestro c칩digo nativo utilizando NDK-build o CMake. El\nfuncionamiento general del NDK en nuestra aplicaci칩n Android sigue el flujo siguiente:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FNDK_Android.png\" alt=\"Flujo de aplicaci칩n Android con c칩digo nativo C\u002FC++\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETenemos nuestro c칩digo Android donde en primer lugar debemos cargar la librer칤a nativa que vamos a utilizar y la\ncabecera de los m칠todos nativos de la misma que utilizaremos. Mientras que por otro lado en nuestro c칩digo C\u002FC++ debemos\ntener la implementaci칩n de esas funciones definidas en Java\u002FKotlin. Posteriormente, entraremos m치s en detalle en estos\naspectos con nuestro ejemplo pr치ctico.\u003C\u002Fp\u003E\n\u003Cp\u003EPor otro lado, hay que tener en cuenta que nuestro c칩digo nativo no va a ejecutarse en una m치quina virtual de Java y\nque, por tanto, debe estar compilado para que pueda ser ejecutado en las diferentes arquitecturas de procesadores\ndisponibles en Android si queremos que desde cualquier dispositivo se pueda ejecutar nuestra App. Adem치s, las librer칤as\nque utilicemos, deben tambi칠n compilarse para ser ejecutadas en las diferentes arquitecturas que soporte nuestra app. La\ncombinaci칩n entre la arquitecturas de CPU y los conjuntos de instrucciones que las mismas pueden ejecutar componen cada\nuna de las plataformas para las que debemos compilar nuestra aplicaci칩n. A d칤a de hoy, estas son las combinaciones,\nllamadas ABI (interfaz binaria de aplicaci칩n), disponibles en Android:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FABIs.png\" alt=\"Conjunto de ABIS de Android\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EFinalmente, hay que tener en cuenta que el uso del NDK puede ser 칰til en cierto tipo de aplicaciones, mientras que en\notras no ser칤a necesario utilizarlo debido al aumento de la complejidad del proyecto sin obtener grandes beneficios por\nello.\u003C\u002Fp\u003E\n\u003Ch2 id=\"쯖u치ndo-deber칤a-utilizar-el-ndk-de-android\"\u003E\u003Ca href=\"#%C2%BFcu%C3%A1ndo-deber%C3%ADa-utilizar-el-ndk-de-android\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E쮺u치ndo deber칤a utilizar el NDK de Android?游뱂\u003C\u002Fh2\u003E\n\u003Cp\u003EDesde mi punto de vista, hay dos situaciones principales donde me decantar칤a por utilizar c칩digo nativo en mi aplicaci칩n\nAndroid.\u003C\u002Fp\u003E\n\u003Cp\u003ESin lugar a dudas el primer factor que me har칤a decantarme a utilizar el NDK de Android no es otro que la mejora de\nrendimiento de mi aplicaci칩n. En mi caso concreto, lo he utilizado com칰nmente para ejecutar funciones criptogr치ficas en\nmis aplicaciones, donde el uso de ciertas librer칤as para trabajar con funciones matem치ticas escritas en C proporciona\nmayor rendimiento y facilidad para ejecutar las mismas. En este tipo de aplicaciones, el cifrado\u002Fdescifrado de grandes\ncantidades de datos podr칤a hacer inusable nuestra aplicaci칩n, por lo que el uso del NDK proporciona ese rendimiento\nextra necesario debido a que dichas operaciones son ejecutadas directamente en la CPU sin pasar por la JVM. Otro tipo de\naplicaciones donde el rendimiento es especialmente importante, son las relacionadas con la codificaci칩n de datos\nmultimedia como audio y video o los videojuegos donde el uso del NDK est치 totalmente recomendado.\u003C\u002Fp\u003E\n\u003Cp\u003EEl segundo factor que me har칤a decantarme por el uso del NDK de Android ser칤a el disponer de una amplia base de c칩digo\nescrita en este lenguaje, lo suficientemente estable, testeada y probada de manera que requiera de pocos cambios durante\nsu vida 칰til o cuyo equipo de desarrollo pueda mantener la misma.\u003C\u002Fp\u003E\n\u003Ch2 id=\"ejemplo-de-aplicaci칩n-utilizando-el-ndk-de-android-\"\u003E\u003Ca href=\"#ejemplo-de-aplicaci%C3%B3n-utilizando-el-ndk-de-android-\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EEjemplo de aplicaci칩n utilizando el NDK de Android 游\u003C\u002Fh2\u003E\n\u003Cp\u003EEl primer paso consiste en crearnos un nuevo proyecto en Android Studio basado en el NDK.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FAndroidStudio.png\" alt=\"Template de proyecto de Android Studio\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EUna vez que hayamos creado nuestro proyecto, dispondremos de nuestra aplicaci칩n Hello World utilizando el NDK. Podemos\nobservar como en la estructura de nuestro proyecto tenemos un directorio \u003Ccode\u003EJava\u003C\u002Fcode\u003Ey otro directorio \u003Ccode\u003Ecpp\u003C\u002Fcode\u003E donde tendremos\nel c칩digo Java y el c칩digo nativo respectivamente.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FProjectStructure.png\" alt=\"Estructura de proyecto con NDK de Android\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EEn el ejemplo que vamos a ver a continuaci칩n vamos a desarrollar una aplicaci칩n que cifra y descifra mensajes de texto.\u003C\u002Fp\u003E\n\u003Cp\u003EAqu칤 podemos ver una captura de la interfaz de usuario de la aplicaci칩n:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FScreenshot.png\" alt=\"Imagen de la aplicaci칩n de ejemplo desarrollada\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EComo podemos ver disponemos de dos botones \u003Ccode\u003Ecifrar\u003C\u002Fcode\u003Ey \u003Ccode\u003Edescifrar\u003C\u002Fcode\u003E, que son los encargados de invocar a nuestras funciones\nresponsables de dicho cometido. Dichas funciones, internamente har치n uso de la librer칤as propias de \u003Ccode\u003Eopenssl\u003C\u002Fcode\u003E escritas\nen C para hacer ejecutar diferentes funciones y algoritmos criptogr치ficos. Un aspecto importante a la hora de utilizar\nel NDK de Android es que tendremos que realizar una envoltura a las diferentes funciones que utilicemos de nuestro\nc칩digo C y que queramos invocar desde nuestro c칩digo Java\u002FKotlin. Es se debe a que dichas funciones deben utilizar el\nJNI para recibir como entrada los tipos de datos necesarios, convertirlos a tipos de datos v치lidos en C y hacer la\noperaci칩n inversa en el momento de devolver alg칰n resultado, convertir los tipos de datos de C a tipos de datos v치lidos\nen Java.\u003C\u002Fp\u003E\n\u003Cp\u003EEl primer paso para configurar nuestra aplicaci칩n consiste en importar nuestra librer칤a as칤 como la librer칤a \u003Ccode\u003Eopenssl\u003C\u002Fcode\u003E a\nnuestro proyecto. Para ello adem치s de tener los ficheros necesarios en nuestro proyecto, debemos enlazarlos dentro del\nfichero \u003Ccode\u003ECMakeLists.txt\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FLibraries.png\" alt=\"Esctructura de las librer칤as a incluir en la app de ejemplo\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EComo podemos observar en la imagen, dentro del directorio \u003Ccode\u003Ecpp\u003C\u002Fcode\u003E tenemos la librer칤a \u003Ccode\u003Eopenssl\u003C\u002Fcode\u003E previamente compilada para\ncada una de las ABIs que vamos a soportar en el proyecto (que podr칤an o no ser todas las disponibles, o solo un\nsubconjunto de las mismas) as칤 como el directorio \u003Ccode\u003Einclude\u003C\u002Fcode\u003E donde tenemos los ficheros de cabecera con las diferentes\nfunciones de la librer칤a \u003Ccode\u003Eopenssl\u003C\u002Fcode\u003E que vamos a utilizar.\u003C\u002Fp\u003E\n\u003Cp\u003EPor otro lado, tenemos nuestra librer칤a, \u003Ccode\u003Ecrypto.c\u003C\u002Fcode\u003E y su correspondiente fichero de cabeceras \u003Ccode\u003Ecrypto.h\u003C\u002Fcode\u003E y el\nfichero \u003Ccode\u003Emain.c\u003C\u002Fcode\u003E punto de entrada a nuestro c칩digo nativo.\u003C\u002Fp\u003E\n\u003Cp\u003EA continuaci칩n, podemos observar el fichero \u003Ccode\u003ECMakeLists.txt\u003C\u002Fcode\u003E con cada una de las opciones comentadas para entenderlas\nmejor.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #292D3E\"\u003E\u003Ccode\u003E\u003Cspan style=\"color: #676E95\"\u003E# versi칩n m칤nima de CMake necesaria para compilar la librer칤a\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Ecmake_minimum_required(VERSION 3.10.2)\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E# declaraci칩n y nombre del proyecto\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Eproject(\"samplendkapp\")\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E#inclusi칩n de los ficheros de cabecera de las librer칤as a utilizar (openssl)\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Einclude_directories(${CMAKE_CURRENT_SOURCE_DIR}\u002Fopenssl\u002Finclude) \u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E# A침adimos nuevas librer칤as, libcrypto y libssl que son los dos componentes de openssl\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Eadd_library(libcrypto STATIC IMPORTED) \u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Eadd_library(libssl STATIC IMPORTED)\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E# Linkamos las librerias con los ejecutables previamente compilados utilizando la variable ${ANDROID_ABI} para diferenciar por tipo de ABI\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Eset_target_properties(libcrypto PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}\u002Fopenssl\u002Flib\u002F${ANDROID_ABI}\u002Flib\u002Flibcrypto.a)\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003Eset_target_properties(libssl PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_SOURCE_DIR}\u002Fopenssl\u002Flib\u002F${ANDROID_ABI}\u002Flib\u002Flibssl.a)\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #FFFFFF\"\u003Eadd_library( \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# seteamos el nombre de la nueva librer칤a que vamos a crear para se consumidad de Java\u002FKotlin.\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E             native-lib\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #89DDFF\"\u003E             \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# La seteamos como compartida.\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E             SHARED\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #89DDFF\"\u003E             \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# Seteamos la ruta relativa a los ficheros fuente de nuestra librer칤a\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E             crypto.c\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E             main.c )\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E# Busca una biblioteca predefinida especificada y almacena la ruta como variable. \u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# Debido a que CMake incluye bibliotecas del sistema en la ruta de b칰squeda\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# predeterminada, solo necesita especificar el nombre de la biblioteca p칰blica del NDK\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# que se desea agregar. CMake verifica que la biblioteca exista antes para\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# completar su construcci칩n.\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #FFFFFF\"\u003Efind_library( \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# nombre de la librer칤a que utilizaremos.\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E              log-lib\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #89DDFF\"\u003E              \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# nombre de la librer칤a del sistema que CMake debe localizar\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E              log )\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #676E95\"\u003E# Especifica las bibliotecas que CMake debe vincular a su librer칤a de destino.\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# Se pueden vincular varias librer칤a , como las librer칤a definidas en este\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #676E95\"\u003E# script, bibliotecas de terceros precompiladas o bibliotecas del sistema.\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #FFFFFF\"\u003Etarget_link_libraries( \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# librer칤a de destino.\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E                       native-lib\u003C\u002Fspan\u003E\n\n\u003Cspan style=\"color: #89DDFF\"\u003E                       \u003C\u002Fspan\u003E\u003Cspan style=\"color: #676E95\"\u003E# Librer칤as que vamos a linkar a native-lib\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E                        libcrypto\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E                        libssl\u003C\u002Fspan\u003E\n\u003Cspan style=\"color: #FFFFFF\"\u003E                       ${log-lib} )\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EEl siguiente paso consiste en cargar nuestra librer칤a nativa en nuestro c칩digo, para ello bastar칤a con un companion\nobject en la activity desde la cual lo vamos a llamar y crear las cabeceras de las funciones de nuestro c칩digo C que\nllamaremos desde aqu칤. La palabra reservada \u003Ccode\u003Eexternal\u003C\u002Fcode\u003E hace referencia a que la funci칩n a la que vamos a llamar est치\nescrita en un lenguaje diferente de Java\u002Fkotlin y en Java se declara con la palabra reservada \u003Ccode\u003Enative\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ccode class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\"\u003Eprivate external fun encryptFromJNI(message: String): ByteArray\nprivate external fun decryptFromJNI(message: ByteArray): String\n\ncompanion object {\n        init {\n            System.loadLibrary(&quot;native-lib&quot;)\n        }\n    }\u003C\u002Fcode\u003E\n\u003Cp\u003EFinalmente, creamos en C nuestras funciones que envuelve a los m칠todos que vamos a llamar de nuestra librer칤a en c칩digo\nnativo (\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FIvanSantosGonz\u002FCryptAndDecriptAndroidNDK\u002Fblob\u002Fmaster\u002Fapp\u002Fsrc\u002Fmain\u002Fcpp\u002Fcrypto.c\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ecrypto.c\u003C\u002Fa\u003E),\ny que recibe y devuelve objetos con tipado del JNI, que son f치cilmente identificables debido a que todos los tipos\nempiezan por J, \u003Ccode\u003Ejstring , jint, jchar, etc\u003C\u002Fcode\u003E. Otro aspecto a tener en cuenta, es que para que este m칠todo haga\nreferencia a la cabecera que declaramos desde Java\u002FKotlin, el nombre del mismo debe coincidir con la ruta completa del\nfichero donde la cabecera es invocada, separando cada subdirectorio con guion bajo.\u003C\u002Fp\u003E\n\u003Cp\u003EFinalmente, podemos observar tambi칠n como se usa la palabra reservada \u003Ccode\u003EJNIEXPORT\u003C\u002Fcode\u003E seguida del tipo de dato que queremos\ndevolver, as칤 como seguido de la palabra reservada \u003Ccode\u003EJNICALL\u003C\u002Fcode\u003E como anotaci칩n a cada m칠todo.\u003C\u002Fp\u003E\n\u003Cp\u003EEl c칩digo completo de este ejemplo est치 disponible en el siguiente repositorio de Github:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FIvanSantosGonz\u002FCryptAndDecriptAndroidNDK\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fgithub.com\u002FIvanSantosGonz\u002FCryptAndDecriptAndroidNDK\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Ccode class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\"\u003EJNIEXPORT jbyteArray JNICALL\nJava_com_samplendkapp_MainActivity_encryptFromJNI(JNIEnv *env, jobject this, jstring message) {\n\n    int ciphertext_len;\n    unsigned char ciphertext[128];\n\n    unsigned char *plaintext = (*env)-&gt;GetStringUTFChars(env, message, 0);\n\n    ciphertext_len = encrypt(plaintext, strlen((char *) plaintext), key, iv,\n                             ciphertext);\n    BIO_dump_fp(stdout, (const char *) ciphertext, ciphertext_len);\n\n    jbyteArray array = (*env)-&gt;NewByteArray(env, ciphertext_len);\n    (*env)-&gt;SetByteArrayRegion(env, array, 0, ciphertext_len, (jbyte *) (ciphertext));\n    return array;\n}\n\nJNIEXPORT jstring JNICALL\nJava_com_samplendkapp_MainActivity_decryptFromJNI(JNIEnv *env, jobject this, jbyteArray message) {\n\n    int decryptedtext_len;\n\n    unsigned char decryptedtext[128];\n\n    int len = (*env)-&gt;GetArrayLength (env, message);\n    unsigned char encryptedText[len];\n    (*env)-&gt;GetByteArrayRegion (env, message, 0, len, (jbyte*) (encryptedText));\n\n    decryptedtext_len = decrypt(encryptedText, len, key, iv,\n                                decryptedtext);\n\n    decryptedtext[decryptedtext_len] = &#039;\\0&#039;;\n\n    return (*env)-&gt;NewStringUTF(env, decryptedtext);\n}\u003C\u002Fcode\u003E\n\u003Ch2 id=\"huevo-de-pascua-游볰\"\u003E\u003Ca href=\"#huevo-de-pascua-%F0%9F%A5%9A\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHuevo de Pascua 游볰游냟\u003C\u002Fh2\u003E\n\u003Cp\u003EPara no quedarnos con el click bait del t칤tulo, hay que tener en cuenta que ciertas aplicaciones como son el caso de\nInstagram, tienen versiones diferentes de su aplicaci칩n en otras plataformas como Android, IOS o Web. En el caso\nconcreto de Instagram, se utilizan diferentes librer칤as escritas en C para la codificaci칩n de video, as칤 como los\nfiltros de im치genes y otras partes de su aplicaci칩n son creados utilizando c칩digo nativo C\u002FC++ por dos razones\nprincipales, tener la m치xima eficiencia al aplicar los mismos, y a su vez poder reutilizar el c칩digo en todas las\nplataformas necesarias. En el caso de Instagram, al ser una aplicaci칩n privada no podemos tener la certeza de esto, pero\ns칤 que sabemos que es una pr치ctica m치s com칰n de lo que parece. Para ejemplo de ello, el c칩digo de una app que si podemos\nobservar es el de Telegram al ser de dominio\np칰blico, (\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FTelegramOrg\u002FTelegram-Android\u002Ftree\u002Fmaster\u002FTMessagesProj\u002Fjni\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Erepositorio de Telegram\u003C\u002Fa\u003E)\ndonde podemos observar la gran cantidad de librer칤as basadas en c칩digo nativo que utiliza.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"images\u002FAndroidNDK\u002FTelegram.png\" alt=\"Repositorio de Telegram con c칩digo nativo utilizado\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"referencias-\"\u003E\u003Ca href=\"#referencias-\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EReferencias 游닄\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003ERepositorio del\nejemplo: \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FIvanSantosGonz\u002FCryptAndDecriptAndroidNDK\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fgithub.com\u002FIvanSantosGonz\u002FCryptAndDecriptAndroidNDK\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EAndroid developers NDK: \u003Ca href=\"https:\u002F\u002Fdeveloper.android.com\u002Fndk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdeveloper.android.com\u002Fndk\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EAndroid developers\nJNI: \u003Ca href=\"https:\u002F\u002Fdeveloper.android.com\u002Ftraining\u002Farticles\u002Fperf-jni?hl=es-419\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdeveloper.android.com\u002Ftraining\u002Farticles\u002Fperf-jni?hl=es-419\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","tags":[{"title":"Android","path":"\u002Ftag\u002FAndroid\u002F"},{"title":"NDK","path":"\u002Ftag\u002FNDK\u002F"},{"title":"C","path":"\u002Ftag\u002FC\u002F"},{"title":"C++","path":"\u002Ftag\u002FC%2B%2B\u002F"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.d4cb8a3b.js" defer></script><script src="/assets/js/page--src--templates--post-vue.4dce4f95.js" defer></script>
  </body>
</html>
